import{_ as b}from"./Avatar.f79e45f0.js";import{e as g,o as m,f as _,F as x,r as T,k,h as n,t as $,j as M,b as v,m as p,a as w}from"./entry.9e251ea0.js";import{u as y,s as h,r,o as C,g as f}from"./index.b4dc6616.js";const B={props:["colors"]},F={class:"color-palette"},R=["onClick"];function q(e,t,i,c,a,s){return m(),_("div",F,[(m(!0),_(x,null,T(i.colors,o=>(m(),_("div",{class:"color",key:o,onClick:d=>e.$emit("change",o),style:k({backgroundColor:o})},null,12,R))),128))])}const L=g(B,[["render",q]]);const N={data(){return{buttonText:"Commencer",timer:null,active:!1}},emits:["click"],methods:{startTimer(){this.buttonText="Pr\xEAt ?",this.active=!0,this.timer=setTimeout(()=>{this.$emit("click")},3e3)},stopTimer(){clearTimeout(this.timer),this.active=!1,this.buttonText="Commencer"}}};function E(e,t,i,c,a,s){return m(),_("div",null,[n("button",{onTouchstart:t[0]||(t[0]=(...o)=>s.startTimer&&s.startTimer(...o)),onTouchend:t[1]||(t[1]=(...o)=>s.stopTimer&&s.stopTimer(...o)),onMousedown:t[2]||(t[2]=(...o)=>s.startTimer&&s.startTimer(...o)),onMouseup:t[3]||(t[3]=(...o)=>s.stopTimer&&s.stopTimer(...o)),class:M({active:a.active})},$(a.buttonText),35)])}const P=g(N,[["render",E],["__scopeId","data-v-9de995ec"]]);const S={data(){return{bodyColors:[],eyeColors:[],playerName:'<span class="loader"></span>',avatar:null,models:["default","red","cat","mario64","dark","naruto","kawaii","wheatley","dragon"]}},methods:{fullScreen(){const e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},changeBodyColor(e){this.avatar.body.color=e,this.update()},changeEyeColor(e){this.avatar.eye.color=e,this.update()},previousModel(){const e=this.models.indexOf(this.avatar.eye.model);this.avatar.eye.model=this.models[e>0?e-1:this.models.length-1],this.update()},nextModel(){const e=this.models.indexOf(this.avatar.eye.model);this.avatar.eye.model=this.models[e<this.models.length-1?e+1:0],this.update()},update(){const e=y(),t=v();h(r(e,`rooms/${t.params.code}/players/${t.params.slug}/avatar`),this.avatar)},start(){const e=y(),t=v();h(r(e,`rooms/${t.params.code}/state`),"player_ready")}},mounted:async function(){const e=y(),t=v();this.fullScreen(),C(r(e,`rooms/${t.params.code}/state`),s=>{s.val()=="player_ready"&&w().push("./")});const i=await f(r(e,`rooms/${t.params.code}/players/${t.params.slug}`)),c=await f(r(e,`rooms/${t.params.code}/colors`));this.playerName=i.val().name,this.bodyColors=c.val().body,this.eyeColors=c.val().eye,C(r(e,`rooms/${t.params.code}`),s=>{const o=s.val(),d=Object.values(o.players).map(u=>{var l;return(l=u.avatar)==null?void 0:l.body.color});this.bodyColors=o.colors.body.filter(u=>!d.includes(u))});const a=await f(r(e,`rooms/${t.params.code}/players/${t.params.slug}/avatar`));a.exists()?this.avatar=a.val():(this.avatar={body:{color:this.bodyColors[0]},eye:{color:this.eyeColors[0],model:"default"}},h(r(e,`rooms/${t.params.code}/players/${t.params.slug}/avatar`),this.avatar))},computed:{}},O={class:"player-settings"},V=["innerHTML"],j=n("h2",null,"Avatar",-1),z={class:"colors"};function A(e,t,i,c,a,s){const o=b,d=L,u=P;return m(),_("div",O,[n("h1",{innerHTML:a.playerName},null,8,V),j,p(o,{class:"avatar",avatar:a.avatar},null,8,["avatar"]),n("div",{class:"previous",onClick:t[0]||(t[0]=(...l)=>s.previousModel&&s.previousModel(...l))},"\u25C4"),n("div",{class:"next",onClick:t[1]||(t[1]=(...l)=>s.nextModel&&s.nextModel(...l))},"\u25BA"),n("div",z,[p(d,{onChange:s.changeBodyColor,colors:a.bodyColors},null,8,["onChange","colors"]),p(d,{onChange:s.changeEyeColor,colors:a.eyeColors},null,8,["onChange","colors"])]),p(u,{onClick:t[2]||(t[2]=l=>s.start())})])}const G=g(S,[["render",A]]);export{G as default};
